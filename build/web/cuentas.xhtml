<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
</h:head>

<h:body>
	<h:form id="form1">
		<p:dataTable id="afiliados" var="af" value="#{cuentasMb.afiliados}">
			<p:column headerText="Nombres">
				<h:outputText value="#{af.nombres}" />
			</p:column>
			<p:column headerText="Apellidos">
				<h:outputText value="#{af.apellidos}" />
			</p:column>
			<p:column headerText="Afiliado ?">
				<h:outputText value="#{af.clienteList.get(0).miembro}" />
			</p:column>
			<p:column headerText="ver cuentas">
				<p:commandButton value="ver cuentas" action="#{cuentasMb.verCuentas(af)}" update="form1:cuentas"/>
			</p:column>
		</p:dataTable>
		<p:dataTable id="cuentas" var="cue" value="#{cuentasMb.cuentas}">
			<p:column headerText="Numero de cuenta">
				<h:outputText value="#{cue.numcuenta}" />
			</p:column>
			<p:column headerText="Tipo de Cuenta">
				<h:outputText value="#{cue.idtipocuenta.nombre}" />
			</p:column>
			<p:column headerText="Total cargos">
				<h:outputText value="#{cue.totalcargos}" />
			</p:column>
			<p:column headerText="Total abonos">
				<h:outputText value="#{cue.totalabonos}" />
			</p:column>
			<p:column headerText="Saldo">
				<h:outputText value="#{cue.saldo}" />
			</p:column>
			
			<p:column headerText="Ver transacciones">
				<p:commandButton value="ver transacciones" action="#{cuentasMb.verTransacciones(cue)}" update="form1:transacciones"/>
			</p:column>
		</p:dataTable>
		
		<p:dataTable id="transacciones" var="tra" value="#{cuentasMb.transaciones}">
			<p:column headerText="id transaccion">
				<h:outputText value="#{tra.idtran}" />
			</p:column>
			<p:column headerText="Monto Cargo">
				<h:outputText value="#{tra.montocargo}" />
			</p:column>
			<p:column headerText="Monto Abono">
				<h:outputText value="#{tra.montoabono}" />
			</p:column>
			<p:column headerText="Fecha">
				<h:outputText value="#{tra.fecha}" />
			</p:column>
			
			<p:column headerText="Ver transacciones">
				<p:commandButton value="ver transacciones" action="#{cuentasMb.verTransacciones(cue)}" update="form1:transacciones"/>
			</p:column>
		</p:dataTable>

	</h:form>

</h:body>

</html>


